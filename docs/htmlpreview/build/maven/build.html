<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Maven Build &mdash; GeoTools 13-SNAPSHOT User Guide</title>
    
    <link rel="stylesheet" href="../../_static/geotools.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '13-SNAPSHOT',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="GeoTools 13-SNAPSHOT User Guide" href="../../index.html" />
    <link rel="up" title="Using Maven" href="index.html" />
    <link rel="next" title="Maven Tips" href="tips.html" />
    <link rel="prev" title="Using Maven" href="index.html" /> 
  </head>
  <body role="document">
    <div class="header">
        <div class="wrap">
            <h1 id="logo"><a href="http://geotools.org">GeoTools</a></h1>
            <h1 id="logo_osgeo"><a href="http://osgeo.org">OSGeo</a></h1>
            <ul id="top-nav">
                <li class="first"><a href="http://docs.geotools.org">Documentation</a></li>
                <li><a href="http://sourceforge.net/projects/geotools/files">Downloads</a></li>
                <li><a href="http://docs.codehaus.org/display/GEOTOOLS/Home">Wiki</a></li>
                <li><a href="http://geotools.org/about.html">About</a></li>
                <li><a href="http://geotoolsnews.blogspot.com">Blog</a></li>
            </ul>
            <!--div id="searchbox">
                <form class="search" action="../../search.html" method="get">
                    <input id="searchbox-query" type="text" name="q" size="25" value="Search &hellip;" tabindex="3" onblur="if(this.value=='') this.value='Search &hellip;';" onfocus="if(this.value=='Search &hellip;') this.value='';" />
                    <input id="searchbox-submit" type="image" value="Search" src="../../_static/img/search_icon_green.png" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
            </div-->
        </div>
    </div>

    <div class="related">
      <ul id="breadcrumbs">
        <li><a href="../../index.html">GeoTools 13-SNAPSHOT User Guide</a> &raquo;</li>
          <li><a href="../index.html" >Building</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Using Maven</a> &raquo;</li>
        <li><a href="#">Maven Build</a></li>
      </ul>
    </div> 

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Maven Build</a><ul>
<li><a class="reference internal" href="#your-first-build">Your First Build</a></li>
<li><a class="reference internal" href="#build-failure">Build Failure</a></li>
<li><a class="reference internal" href="#expected-build-times">Expected Build times</a></li>
<li><a class="reference internal" href="#common-build-problems">Common Build Problems</a><ul>
<li><a class="reference internal" href="#unable-to-find-org-geotools-maven-javadoc-jar">Unable to find org.geotools.maven:javadoc:jar</a></li>
<li><a class="reference internal" href="#failure-of-metadata-rangesettest">Failure of Metadata RangeSetTest</a></li>
<li><a class="reference internal" href="#failure-of-gridcoveragerenderertest">Failure of GridCoverageRendererTest</a></li>
<li><a class="reference internal" href="#unable-to-delete-directory-on-windows">Unable to Delete Directory on Windows</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Using Maven</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tips.html"
                        title="next chapter">Maven Tips</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/build/maven/build.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="maven-build">
<h1>Maven Build<a class="headerlink" href="#maven-build" title="Permalink to this headline">¶</a></h1>
<p>Several GeoTools modules depend on other GeoTools modules, so the first thing you will want to do is perform a full build so that you have a jar from each module installed in your local repository.</p>
<div class="section" id="your-first-build">
<h2>Your First Build<a class="headerlink" href="#your-first-build" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Start by going to where you have the source code:</p>
<div class="highlight-python"><div class="highlight"><pre>cd C:\java\geotools\trunk
</pre></div>
</div>
</li>
<li><p class="first">And check that we actually have the source code:</p>
<div class="highlight-python"><div class="highlight"><pre>C:\java\geotools\trunk&gt;dir
 Volume in drive C is INTERNAL
 Volume Serial Number is 3CA5-71DD
 Directory of C:\java\geotools\trunk
26/04/2007  11:12 AM    &lt;DIR&gt;          .
26/04/2007  11:12 AM    &lt;DIR&gt;          ..
11/01/2007  12:25 AM    &lt;DIR&gt;          build
01/12/2006  01:27 AM    &lt;DIR&gt;          demo
04/11/2006  01:04 PM    &lt;DIR&gt;          doc
16/07/2006  07:56 AM    &lt;DIR&gt;          licenses
07/04/2007  10:36 AM    &lt;DIR&gt;          modules
26/04/2007  11:12 AM            52,450 pom.xml
22/10/2006  09:11 AM             3,705 README.txt
26/04/2007  10:08 AM    &lt;DIR&gt;          target
               2 File(s)         56,155 bytes
               8 Dir(s)  15,264,776,192 bytes free
</pre></div>
</div>
</li>
<li><p class="first">Make sure you are connected to the internet</p>
</li>
<li><p class="first">Start your first build:</p>
<div class="highlight-python"><div class="highlight"><pre>C:\java\geotools\trunk&gt;mvn install
</pre></div>
</div>
</li>
<li><p class="first">If all is well, Maven should download the required .jar files and build GeoTools modules.</p>
</li>
<li><p class="first">At the end of this process it will display a list of all the modules which were built and installed correctly.:</p>
<div class="highlight-python"><div class="highlight"><pre>[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9 months, 3 weeks, 12 hours, 3 minuets, and 43 seconds
[INFO] Finished at: Sat Feb 12 16:05:08 EST 2011
[INFO] Final Memory: 41M/87M
[INFO] ------------------------------------------------------------------------
</pre></div>
</div>
</li>
<li><p class="first">The first build takes a while due to the download time for the .jar files.</p>
</li>
</ol>
<p>If you have any trouble check the common build failures at the bottom of this page.</p>
</div>
<div class="section" id="build-failure">
<h2>Build Failure<a class="headerlink" href="#build-failure" title="Permalink to this headline">¶</a></h2>
<p>It is all well and good to recognise a successful build, but how do you recognise a build that has failed?</p>
<ol class="arabic">
<li><p class="first">If your build fails you will get feedback like this:</p>
<div class="highlight-python"><div class="highlight"><pre>[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] There are test failures.
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 7 minutes 56 seconds
[INFO] Finished at: Mon Nov 20 12:15:48 PST 2006
[INFO] Final Memory: 23M/42M
[INFO] ------------------------------------------------------------------------
</pre></div>
</div>
</li>
<li><p class="first">You need to scan back through the output and find the &#8220;&lt;&lt;&lt; FAILURE!&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre>Running org.geotools.data.mif.MIFDataStoreTest
Tests run: 9, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 6.703 sec &lt;&lt;&lt; FAILURE!
</pre></div>
</div>
</li>
<li><p class="first">You can open the test results of the indicated failure in order to see what went wrong.
Test results are contained in the target directory.</p>
</li>
</ol>
</div>
<div class="section" id="expected-build-times">
<h2>Expected Build times<a class="headerlink" href="#expected-build-times" title="Permalink to this headline">¶</a></h2>
<p>Depending on your hardware and internet connection:</p>
<ul class="simple">
<li>Building the first time, where maven needs to download everything, may take 20 to 30 minuets.</li>
<li>Future builds check for the most recent .jar files from the internet. The checking is based of md5 checksums and does not take long. Building subsequently may take 10 minuets depending on your hardware and internet connection.</li>
<li>After everything is downloaded can build &#8220;offline&#8221; and avoid the checking of mdf5 checksums resulting in a faster build of 5-7 minuets.</li>
<li>Finally you can turn off tests (danger!) and build offline to get a build under 2 minuets</li>
</ul>
<p>Tips to speed up a build:</p>
<ul class="simple">
<li>Do not do a &#8220;clean&#8221; build if you do not have to</li>
<li>Experiment with the best use of Maven 3 &#8220;threading&#8221; for your computer</li>
<li>Rebuild a single module after you have modified it</li>
<li>Update your &#8220;settings.xml&#8221; file to point to a &#8220;mirror&#8221; in your country - allowing you to download closer to home</li>
<li>Build offline (when everything is downloaded to your local repository)</li>
</ul>
</div>
<div class="section" id="common-build-problems">
<h2>Common Build Problems<a class="headerlink" href="#common-build-problems" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>The following common problems occur during a::</dt>
<dd>mvn -U clean install</dd>
</dl>
<div class="section" id="unable-to-find-org-geotools-maven-javadoc-jar">
<h3>Unable to find org.geotools.maven:javadoc:jar<a class="headerlink" href="#unable-to-find-org-geotools-maven-javadoc-jar" title="Permalink to this headline">¶</a></h3>
<p>We have a little of a chicken-and-the-egg problem here when building a tag for the first time.</p>
<p>To fix you need to build the javadoc jar by hand.</p>
<ol class="arabic">
<li><p class="first">Change to the module directory:</p>
<div class="highlight-python"><div class="highlight"><pre>cd build/maven/javadoc
</pre></div>
</div>
</li>
<li><p class="first">Build the javadoc module</p>
<blockquote>
<div><p>mvn install</p>
</div></blockquote>
</li>
<li><p class="first">You can now return to the root of the project and restart your build.</p>
</li>
</ol>
<p>Note that this plugin requires your JAVA_HOME to be set to a JDK as it makes use of the tools.jar (in order to build javadocs).</p>
</div>
<div class="section" id="failure-of-metadata-rangesettest">
<h3>Failure of Metadata RangeSetTest<a class="headerlink" href="#failure-of-metadata-rangesettest" title="Permalink to this headline">¶</a></h3>
<p>This looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre>[INFO] ----------------------------------------------------------------------------
[INFO] Building Metadata
[INFO]    task-segment: [clean, install]
[INFO] ----------------------------------------------------------------------------
[INFO] [clean:clean]
...
Running org.geotools.util.RangeSetTest
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.031 sec &lt;&lt;&lt; FAILURE!
</pre></div>
</div>
<p>Navigating into the directory to look at the actual error:</p>
<div class="highlight-python"><div class="highlight"><pre>C:\java\geotools\trunk\modules\library\metadata\target\surefire-reports&gt;more *RangeSetTest.txt
-------------------------------------------------------------------------------
Test set: org.geotools.util.RangeSetTest
-------------------------------------------------------------------------------
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.031 sec &lt;&lt;&lt; FAILURE!
testRangeRemoval(org.geotools.util.RangeSetTest)  Time elapsed: 0 sec  &lt;&lt;&lt; ERROR!
java.lang.NoClassDefFoundError: javax/media/jai/util/Range
        at org.geotools.util.RangeSetTest.testRangeRemoval(RangeSetTest.java:58)
</pre></div>
</div>
<p>This indicates that Java Advanced Imaging has not been installed into the JRE (please see the dependencies section and try again).</p>
<p>On GeoTools trunk you can try the following experimental option. This will download and use just the JAI jar files, you wont get native performance - but for a build do you even care?:</p>
<div class="highlight-python"><div class="highlight"><pre>mvn install -Pnojai
</pre></div>
</div>
</div>
<div class="section" id="failure-of-gridcoveragerenderertest">
<h3>Failure of GridCoverageRendererTest<a class="headerlink" href="#failure-of-gridcoveragerenderertest" title="Permalink to this headline">¶</a></h3>
<p>This looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre>[INFO] ----------------------------------------------------------------------------
[INFO] Building Render
[INFO]    task-segment: [install]
[INFO] ----------------------------------------------------------------------------
...
Running org.geotools.renderer.lite.GridCoverageRendererTest
Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.062 sec &lt;&lt;&lt; FAILURE!
Details:

C:\java\geotools\trunk\modules\library\render\target\surefire-reports&gt;more *GridCoverageRendererTest.txt
-------------------------------------------------------------------------------
Test set: org.geotools.renderer.lite.GridCoverageRendererTest
-------------------------------------------------------------------------------
Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.062 sec &lt;&lt;&lt; FAILURE!
testPaint(org.geotools.renderer.lite.GridCoverageRendererTest)  Time elapsed: 0.047 sec  &lt;&lt;&lt; ERROR!
java.lang.NullPointerException
     at org.geotools.renderer.lite.GridCoverageRendererTest.getGC(GridCoverageRendererTest.java:103)
     at org.geotools.renderer.lite.GridCoverageRendererTest.testPaint(GridCoverageRendererTest.java:163)

testReproject(org.geotools.renderer.lite.GridCoverageRendererTest)  Time elapsed: 0 sec  &lt;&lt;&lt; ERROR!
java.lang.NullPointerException
     at org.geotools.renderer.lite.GridCoverageRendererTest.getGC(GridCoverageRendererTest.java:103)
     at org.geotools.renderer.lite.GridCoverageRendererTest.testReproject(GridCoverageRendererTest.java:199)
</pre></div>
</div>
<p>This indicates that Image IO support has not been installed into the JRE (please see the dependencies section and try again).</p>
</div>
<div class="section" id="unable-to-delete-directory-on-windows">
<h3>Unable to Delete Directory on Windows<a class="headerlink" href="#unable-to-delete-directory-on-windows" title="Permalink to this headline">¶</a></h3>
<p>Build systems like maven (that smash files around for a living) are generally incompatible with Microsoft Indexing Service.
From Lim Goh on email</p>
<p>I would also like to point out for future reference that the Windows
Indexing Service is not 100% compatible with maven, and causes some
maven builds to break. Developers who use Windows 7 64-bit (or
anything close like Vista or 32-bit) may have unsuccessful build due
to &#8220;unable to delete directory&#8221;. If that happens please try to disable
Windows Indexing Service for the entire svn working copy and try
again. Hopefully this will fix the problem.</p>
<p>With this in mind it is also advisable for mac developers to &#8220;ignore&#8221; build directories from Time Machine (as the files change constantly and Time Machine will burn up your space trying to keep track of it all).</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <ul id="breadcrumbs">
            <li class="right" style="margin-right: 10px">
              <a href="tips.html" title="Maven Tips"
                 accesskey="N">next</a></li>
            <li class="right" >
              <a href="index.html" title="Using Maven"
                 accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">GeoTools 13-SNAPSHOT User Guide</a> &raquo;</li>
          <li><a href="../index.html" >Building</a> &raquo;</li>
          <li><a href="index.html" >Using Maven</a> &raquo;</li>
        <li><a href="#">Maven Build</a></li>
      </ul>
    </div> 

    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, GeoTools.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3b1.
    </div>
  </body>
</html>