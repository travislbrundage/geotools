<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CRS &mdash; GeoTools 13-SNAPSHOT User Guide</title>
    
    <link rel="stylesheet" href="../../_static/geotools.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '13-SNAPSHOT',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="GeoTools 13-SNAPSHOT User Guide" href="../../index.html" />
    <link rel="up" title="Referencing" href="index.html" />
    <link rel="next" title="Axis" href="axis.html" />
    <link rel="prev" title="Internal" href="internal.html" /> 
  </head>
  <body role="document">
    <div class="header">
        <div class="wrap">
            <h1 id="logo"><a href="http://geotools.org">GeoTools</a></h1>
            <h1 id="logo_osgeo"><a href="http://osgeo.org">OSGeo</a></h1>
            <ul id="top-nav">
                <li class="first"><a href="http://docs.geotools.org">Documentation</a></li>
                <li><a href="http://sourceforge.net/projects/geotools/files">Downloads</a></li>
                <li><a href="http://docs.codehaus.org/display/GEOTOOLS/Home">Wiki</a></li>
                <li><a href="http://geotools.org/about.html">About</a></li>
                <li><a href="http://geotoolsnews.blogspot.com">Blog</a></li>
            </ul>
            <!--div id="searchbox">
                <form class="search" action="../../search.html" method="get">
                    <input id="searchbox-query" type="text" name="q" size="25" value="Search &hellip;" tabindex="3" onblur="if(this.value=='') this.value='Search &hellip;';" onfocus="if(this.value=='Search &hellip;') this.value='';" />
                    <input id="searchbox-submit" type="image" value="Search" src="../../_static/img/search_icon_green.png" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
            </div-->
        </div>
    </div>

    <div class="related">
      <ul id="breadcrumbs">
        <li><a href="../../index.html">GeoTools 13-SNAPSHOT User Guide</a> &raquo;</li>
          <li><a href="../index.html" >Library</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Referencing</a> &raquo;</li>
        <li><a href="#">CRS</a></li>
      </ul>
    </div> 

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">CRS</a><ul>
<li><a class="reference internal" href="#defining-a-coordinatereferencesystem">Defining a CoordinateReferenceSystem</a><ul>
<li><a class="reference internal" href="#well-known-text">Well Known Text</a></li>
<li><a class="reference internal" href="#matching-a-coordinatereferencesystem">Matching a CoordinateReferenceSystem</a></li>
</ul>
</li>
<li><a class="reference internal" href="#finding-a-math-transform">Finding a Math Transform</a></li>
<li><a class="reference internal" href="#transforming-a-geometry">Transforming a Geometry</a></li>
<li><a class="reference internal" href="#axis-order">Axis Order</a></li>
<li><a class="reference internal" href="#coordinatereferencesystem">CoordinateReferenceSystem</a><ul>
<li><a class="reference internal" href="#constants">Constants</a></li>
<li><a class="reference internal" href="#generic-2d">GENERIC_2D</a></li>
<li><a class="reference internal" href="#google-maps">Google Maps</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="internal.html"
                        title="previous chapter">Internal</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="axis.html"
                        title="next chapter">Axis</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/library/referencing/crs.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="crs">
<h1>CRS<a class="headerlink" href="#crs" title="Permalink to this headline">¶</a></h1>
<p>We have provided the <strong>CRS</strong> helper class as your first point of call when working with the referencing module. This class allows you to quickly accomplish the most common referencing tasks.</p>
<p>References:</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.geotools.org/stable/javadocs/org/geotools/referencing/CRS.html">http://docs.geotools.org/stable/javadocs/org/geotools/referencing/CRS.html</a></li>
</ul>
<p><em>Before you Start</em></p>
<p>The most conservative way to deal with the definition of a <strong>CoordinateReferenceSystem</strong> is not
to. Instead make use of an authority that provides complete definitions defined by a simple code.</p>
<p>To hook this up make sure you have one of the <strong>gt-epsg</strong> plugins on your CLASSPATH. The
<strong>gt-epsg-hsql</strong> plugin is recommended.</p>
<div class="section" id="defining-a-coordinatereferencesystem">
<h2>Defining a CoordinateReferenceSystem<a class="headerlink" href="#defining-a-coordinatereferencesystem" title="Permalink to this headline">¶</a></h2>
<p>This is easily the most common use for the CRS class:</p>
<div class="highlight-python"><div class="highlight"><pre>import org.geotools.referencing.CRS;

CoordinateReferenceSystem sourceCRS = CRS.decode(&quot;EPSG:4326&quot;);
</pre></div>
</div>
<p>The example above assumes you have <strong>gt-epsg-hsql</strong> jar on your CLASSPATH.</p>
<p>Depending on the jars you have on your CLASSPATH a range of authorities are available to define a
coordinate reference system for you.</p>
<p>Using the &#8220;OGC URN&#8221; syntax:</p>
<div class="highlight-python"><div class="highlight"><pre>CoordinateReferenceSystem sourceCRS = CRS.decode(&quot;urn:ogc:def:ellipsoid:EPSG:6.0:7001&quot;);
</pre></div>
</div>
<p>Using the WMS AUTO2 syntax (which requires you pass in your current &#8220;position&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre>CoordinateReferenceSystem sourceCRS = CRS.decode(&quot;AUTO2:42001,&quot;+lat+&quot;,&quot;+lon);
</pre></div>
</div>
<div class="section" id="well-known-text">
<h3>Well Known Text<a class="headerlink" href="#well-known-text" title="Permalink to this headline">¶</a></h3>
<p><strong>CoordinateReferenceSystem</strong> can also be defined by a text format ((called &#8220;Well Known Text&#8221; or WKT). This is a standard provided by the OGC and shows up in inside a shapefile &#8220;prj&#8221; file, or in a databases such as PostGIS and Oracle.</p>
<p>To parse WKT please use the CRS.parseWKT( txt ) method:</p>
<div class="highlight-python"><div class="highlight"><pre>String wkt = &quot;GEOGCS[&quot; + &quot;\&quot;WGS 84\&quot;,&quot; + &quot;  DATUM[&quot; + &quot;    \&quot;WGS_1984\&quot;,&quot;
        + &quot;    SPHEROID[\&quot;WGS 84\&quot;,6378137,298.257223563,AUTHORITY[\&quot;EPSG\&quot;,\&quot;7030\&quot;]],&quot;
        + &quot;    TOWGS84[0,0,0,0,0,0,0],&quot; + &quot;    AUTHORITY[\&quot;EPSG\&quot;,\&quot;6326\&quot;]],&quot;
        + &quot;  PRIMEM[\&quot;Greenwich\&quot;,0,AUTHORITY[\&quot;EPSG\&quot;,\&quot;8901\&quot;]],&quot;
        + &quot;  UNIT[\&quot;DMSH\&quot;,0.0174532925199433,AUTHORITY[\&quot;EPSG\&quot;,\&quot;9108\&quot;]],&quot;
        + &quot;  AXIS[\&quot;Lat\&quot;,NORTH],&quot; + &quot;  AXIS[\&quot;Long\&quot;,EAST],&quot;
        + &quot;  AUTHORITY[\&quot;EPSG\&quot;,\&quot;4326\&quot;]]&quot;;

CoordinateReferenceSystem crs = CRS.parseWKT(wkt);
</pre></div>
</div>
<p>The different organisations each have slightly different ideas on how some of the names work in
the WKT standard. GeoTools does a good job of listing common aliases in order to read WKT
generated from a range of tools.</p>
<p>To generate WKT:</p>
<ul>
<li><p class="first">To generate WKT against the standard:</p>
<div class="highlight-java"><div class="highlight"><pre>    <span class="n">CoordinateReferenceSystem</span> <span class="n">crs</span> <span class="o">=</span> <span class="n">CRS</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="s">&quot;EPSG:32735&quot;</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">wkt</span> <span class="o">=</span> <span class="n">crs</span><span class="o">.</span><span class="na">toWKT</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;wkt for EPSG:32735&quot;</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">wkt</span> <span class="o">);</span>
</pre></div>
</div>
<p>produces the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">PROJCS</span><span class="p">[</span><span class="s">&quot;WGS 84 / UTM zone 35S&quot;</span><span class="p">,</span>
  <span class="n">GEOGCS</span><span class="p">[</span><span class="s">&quot;WGS 84&quot;</span><span class="p">,</span>
    <span class="n">DATUM</span><span class="p">[</span><span class="s">&quot;World Geodetic System 1984&quot;</span><span class="p">,</span>
      <span class="n">SPHEROID</span><span class="p">[</span><span class="s">&quot;WGS 84&quot;</span><span class="p">,</span> <span class="mf">6378137.0</span><span class="p">,</span> <span class="mf">298.257223563</span><span class="p">,</span> <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;7030&quot;</span><span class="p">]],</span>
      <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;6326&quot;</span><span class="p">]],</span>
    <span class="n">PRIMEM</span><span class="p">[</span><span class="s">&quot;Greenwich&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;8901&quot;</span><span class="p">]],</span>
    <span class="n">UNIT</span><span class="p">[</span><span class="s">&quot;degree&quot;</span><span class="p">,</span> <span class="mf">0.017453292519943295</span><span class="p">],</span>
    <span class="n">AXIS</span><span class="p">[</span><span class="s">&quot;Geodetic latitude&quot;</span><span class="p">,</span> <span class="n">NORTH</span><span class="p">],</span>
    <span class="n">AXIS</span><span class="p">[</span><span class="s">&quot;Geodetic longitude&quot;</span><span class="p">,</span> <span class="n">EAST</span><span class="p">],</span>
    <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;4326&quot;</span><span class="p">]],</span>
  <span class="n">PROJECTION</span><span class="p">[</span><span class="s">&quot;Transverse Mercator&quot;</span><span class="p">,</span> <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;9807&quot;</span><span class="p">]],</span>
  <span class="n">PARAMETER</span><span class="p">[</span><span class="s">&quot;central_meridian&quot;</span><span class="p">,</span> <span class="mf">27.0</span><span class="p">],</span>
  <span class="n">PARAMETER</span><span class="p">[</span><span class="s">&quot;latitude_of_origin&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
  <span class="n">PARAMETER</span><span class="p">[</span><span class="s">&quot;scale_factor&quot;</span><span class="p">,</span> <span class="mf">0.9996</span><span class="p">],</span>
  <span class="n">PARAMETER</span><span class="p">[</span><span class="s">&quot;false_easting&quot;</span><span class="p">,</span> <span class="mf">500000.0</span><span class="p">],</span>
  <span class="n">PARAMETER</span><span class="p">[</span><span class="s">&quot;false_northing&quot;</span><span class="p">,</span> <span class="mf">10000000.0</span><span class="p">],</span>
  <span class="n">UNIT</span><span class="p">[</span><span class="s">&quot;m&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
  <span class="n">AXIS</span><span class="p">[</span><span class="s">&quot;Easting&quot;</span><span class="p">,</span> <span class="n">EAST</span><span class="p">],</span>
  <span class="n">AXIS</span><span class="p">[</span><span class="s">&quot;Northing&quot;</span><span class="p">,</span> <span class="n">NORTH</span><span class="p">],</span>
  <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;32735&quot;</span><span class="p">]]</span>
</pre></div>
</div>
</li>
<li><p class="first">To generate WKT that matches a bit more the ESRI use:</p>
<p>As mentioned above differnt vendors don&#8217;t exactly follow the standard. For the WKT above
ESRI ArcMap produces the following:</p>
<div class="highlight-python"><div class="highlight"><pre>PROJCS[&quot;WGS_1984_UTM_Zone_35S&quot;,GEOGCS[&quot;GCS_WGS_1984&quot;,DATUM[&quot;D_WGS_1984&quot;,SPHEROID[&quot;WGS_1984&quot;,6378137,298.257223563]],
PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;Degree&quot;,0.017453292519943295]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;Central_Meridian&quot;,27],
PARAMETER[&quot;Latitude_Of_Origin&quot;,0],PARAMETER[&quot;Scale_Factor&quot;,0.9996],PARAMETER[&quot;False_Easting&quot;,500000],PARAMETER[&quot;False_Northing&quot;,10000000],
UNIT[&quot;Meter&quot;,1]
</pre></div>
</div>
<p>Notable differences are:</p>
<ul class="simple">
<li>the way the datum, unit of measure, projection and projection parameters are spelled out</li>
<li>it&#8217;s all in one line.</li>
</ul>
<p>We can produce something similar using:</p>
<div class="highlight-java"><div class="highlight"><pre>    <span class="n">CoordinateReferenceSystem</span> <span class="n">crs</span> <span class="o">=</span> <span class="n">CRS</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="s">&quot;EPSG:32735&quot;</span><span class="o">);</span>
    <span class="n">Formattable</span> <span class="n">f</span> <span class="o">=</span> <span class="o">(</span><span class="n">Formattable</span><span class="o">)</span> <span class="n">CRS</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="s">&quot;EPSG:32735&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">wkt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="na">toWKT</span><span class="o">(</span><span class="n">Citations</span><span class="o">.</span><span class="na">ESRI</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="c1">// use 0 indent for single line</span>
    
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;wkt for EPSG:32735 (ESRI)&quot;</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">wkt</span> <span class="o">);</span>
</pre></div>
</div>
<p>You can change the indent to 0 in order to get everything on a single line.</p>
<p>Produces the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">PROJCS</span><span class="p">[</span><span class="s">&quot;WGS 84 / UTM zone 35S&quot;</span><span class="p">,</span>
  <span class="n">GEOGCS</span><span class="p">[</span><span class="s">&quot;WGS 84&quot;</span><span class="p">,</span>
    <span class="n">DATUM</span><span class="p">[</span><span class="s">&quot;D_WGS_1984&quot;</span><span class="p">,</span>
      <span class="n">SPHEROID</span><span class="p">[</span><span class="s">&quot;D_WGS_1984&quot;</span><span class="p">,</span> <span class="mf">6378137.0</span><span class="p">,</span> <span class="mf">298.257223563</span><span class="p">,</span> <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;7030&quot;</span><span class="p">]],</span>
      <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;6326&quot;</span><span class="p">]],</span>
    <span class="n">PRIMEM</span><span class="p">[</span><span class="s">&quot;Greenwich&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;8901&quot;</span><span class="p">]],</span>
    <span class="n">UNIT</span><span class="p">[</span><span class="s">&quot;degree&quot;</span><span class="p">,</span> <span class="mf">0.017453292519943295</span><span class="p">],</span>
    <span class="n">AXIS</span><span class="p">[</span><span class="s">&quot;Geodetic longitude&quot;</span><span class="p">,</span> <span class="n">EAST</span><span class="p">],</span>
    <span class="n">AXIS</span><span class="p">[</span><span class="s">&quot;Geodetic latitude&quot;</span><span class="p">,</span> <span class="n">NORTH</span><span class="p">],</span>
    <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;4326&quot;</span><span class="p">]],</span>
  <span class="n">PROJECTION</span><span class="p">[</span><span class="s">&quot;Transverse Mercator&quot;</span><span class="p">,</span> <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;9807&quot;</span><span class="p">]],</span>
  <span class="n">PARAMETER</span><span class="p">[</span><span class="s">&quot;Longitude_Of_Origin&quot;</span><span class="p">,</span> <span class="mf">27.0</span><span class="p">],</span>
  <span class="n">PARAMETER</span><span class="p">[</span><span class="s">&quot;Latitude_Of_Center&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
  <span class="n">PARAMETER</span><span class="p">[</span><span class="s">&quot;scale_factor&quot;</span><span class="p">,</span> <span class="mf">0.9996</span><span class="p">],</span>
  <span class="n">PARAMETER</span><span class="p">[</span><span class="s">&quot;false_easting&quot;</span><span class="p">,</span> <span class="mf">500000.0</span><span class="p">],</span>
  <span class="n">PARAMETER</span><span class="p">[</span><span class="s">&quot;false_northing&quot;</span><span class="p">,</span> <span class="mf">10000000.0</span><span class="p">],</span>
  <span class="n">UNIT</span><span class="p">[</span><span class="s">&quot;m&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
  <span class="n">AXIS</span><span class="p">[</span><span class="s">&quot;Easting&quot;</span><span class="p">,</span> <span class="n">EAST</span><span class="p">],</span>
  <span class="n">AXIS</span><span class="p">[</span><span class="s">&quot;Northing&quot;</span><span class="p">,</span> <span class="n">NORTH</span><span class="p">],</span>
  <span class="n">AUTHORITY</span><span class="p">[</span><span class="s">&quot;EPSG&quot;</span><span class="p">,</span><span class="s">&quot;32735&quot;</span><span class="p">]]</span>
</pre></div>
</div>
<p>While not 1-1 equal, the datum, projection, projection parameters and units are spelled
out the same.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Formatable</p>
<p>The code above casted the CRS into a Formattable object, that gives the developer more
control on how things are converted in WKT, and then asked to generate the WKT using the
ESRI aliases and 2 indentation when generating the output.</p>
<p class="last">The default is CITATIONS.ESPG, indent 2 instead.</p>
</div>
</div>
<div class="section" id="matching-a-coordinatereferencesystem">
<h3>Matching a CoordinateReferenceSystem<a class="headerlink" href="#matching-a-coordinatereferencesystem" title="Permalink to this headline">¶</a></h3>
<p>You can actually search based on any metadata, not just name, the way you do it is you construct
an example of what you are looking for - and than ask for the best match.</p>
<p>This functionality is especially useful when you have produced a CoordinateReferenceSystem by
parsing WKT and you would like to find the &#8220;official&#8221; code for it.:</p>
<div class="highlight-python"><div class="highlight"><pre>String wkt =
    &quot;GEOGCS[\&quot;ED50\&quot;,\n&quot; +
    &quot;  DATUM[\&quot;European Datum 1950\&quot;,\n&quot; +
    &quot;  SPHEROID[\&quot;International 1924\&quot;, 6378388.0, 297.0]],\n&quot; +
    &quot;PRIMEM[\&quot;Greenwich\&quot;, 0.0],\n&quot; +
    &quot;UNIT[\&quot;degree\&quot;, 0.017453292519943295]]&quot;;
CoordinateReferenceSystem example = CRS.parseWKT(wkt);

String code = CRS.lookupIdentifier( example, true ); // should be &quot;EPSG:4230&quot;
CoordinateReferenceSystem crs = CRS.decode( code );
</pre></div>
</div>
<p>In the above example the projected is named &#8220;ED50&#8221;, which is not the official name.</p>
</div>
</div>
<div class="section" id="finding-a-math-transform">
<h2>Finding a Math Transform<a class="headerlink" href="#finding-a-math-transform" title="Permalink to this headline">¶</a></h2>
<p>Here is a quick sample use of the CRS class:</p>
<div class="highlight-python"><div class="highlight"><pre>import org.geotools.referencing.CRS;

CoordinateReferenceSystem sourceCRS = CRS.decode(&quot;EPSG:4326&quot;);
CoordinateReferenceSystem targetCRS = CRS.decode(&quot;EPSG:23032&quot;);

MathTransform transform = CRS.findMathTransform(sourceCRS, targetCRS, true);
</pre></div>
</div>
<p>When using a CoordinateReferenceSystem that has been parsed from WKT you will
often need to &#8220;relax&#8221; the accuracy by setting the <strong>lenient</strong> parameter to true when searching with findMathTransform.</p>
<p>The official CoordinateReferenceSystem definitions provided by the EPSG database have extra metadata (describing how to do Datum shifts for example), beyond what can be provided using WKT.:</p>
<div class="highlight-python"><div class="highlight"><pre>import org.geotools.referencing.CRS;

String wkt = &quot;PROJCS[\&quot;NAD83 / BC Albers\&quot;,&quot;+
  &quot;GEOGCS[\&quot;NAD83\&quot;, &quot;+
  &quot;  DATUM[\&quot;North_American_Datum_1983\&quot;, &quot;+
  &quot;    SPHEROID[\&quot;GRS 1980\&quot;, 6378137.0, 298.257222101, AUTHORITY[\&quot;EPSG\&quot;,\&quot;7019\&quot;]], &quot;+
  &quot;    TOWGS84[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], &quot;+
  &quot;    AUTHORITY[\&quot;EPSG\&quot;,\&quot;6269\&quot;]], &quot;+
  &quot;  PRIMEM[\&quot;Greenwich\&quot;, 0.0, AUTHORITY[\&quot;EPSG\&quot;,\&quot;8901\&quot;]], &quot;+
  &quot;  UNIT[\&quot;degree\&quot;, 0.017453292519943295], &quot;+
  &quot;  AXIS[\&quot;Lon\&quot;, EAST], &quot;+
  &quot;  AXIS[\&quot;Lat\&quot;, NORTH], &quot;+
  &quot;  AUTHORITY[\&quot;EPSG\&quot;,\&quot;4269\&quot;]], &quot;+
  &quot;PROJECTION[\&quot;Albers_Conic_Equal_Area\&quot;], &quot;+
  &quot;PARAMETER[\&quot;central_meridian\&quot;, -126.0], &quot;+
  &quot;PARAMETER[\&quot;latitude_of_origin\&quot;, 45.0], &quot;+
  &quot;PARAMETER[\&quot;standard_parallel_1\&quot;, 50.0], &quot;+
  &quot;PARAMETER[\&quot;false_easting\&quot;, 1000000.0], &quot;+
  &quot;PARAMETER[\&quot;false_northing\&quot;, 0.0], &quot;+
  &quot;PARAMETER[\&quot;standard_parallel_2\&quot;, 58.5], &quot;+
  &quot;UNIT[\&quot;m\&quot;, 1.0], &quot;+
  &quot;AXIS[\&quot;x\&quot;, EAST], &quot;+
  &quot;AXIS[\&quot;y\&quot;, NORTH], &quot;+
  &quot;AUTHORITY[\&quot;EPSG\&quot;,&quot;3005&quot;]]&quot;;
CoordinateReferenceSystem example = CRS.parseWKT(wkt);
CoordinateReferenceSystem targetCRS = CRS.decode(&quot;EPSG:4326&quot;);

MathTransform transform = CRS.findMathTransform(sourceCRS, targetCRS, false);
</pre></div>
</div>
</div>
<div class="section" id="transforming-a-geometry">
<h2>Transforming a Geometry<a class="headerlink" href="#transforming-a-geometry" title="Permalink to this headline">¶</a></h2>
<p>A <strong>MathTransform</strong>, as generated above, can be used by bashing away at the interface and feeding
it <strong>DirectPosition</strong> objects one at a time.</p>
<p>Or you could break out the JTS utility class where this work has been done for you:</p>
<div class="highlight-python"><div class="highlight"><pre>import org.geotools.geometry.jts.JTS;
import org.geotools.referencing.CRS;

MathTransform transform = CRS.findMathTransform(sourceCRS, targetCRS, false);
Geometry targetGeometry = JTS.transform( sourceGeometry, transform);
</pre></div>
</div>
<p>Transforming an ISO Geometry is more straight forward:</p>
<div class="highlight-python"><div class="highlight"><pre>CoordinateReferenceSystem targetCRS = CRS.decode(&quot;EPSG:23032&quot;);
Geometry target = geometry.transform( targetCRS );
</pre></div>
</div>
</div>
<div class="section" id="axis-order">
<h2>Axis Order<a class="headerlink" href="#axis-order" title="Permalink to this headline">¶</a></h2>
<p>One thing that often comes up is the question of axis order.</p>
<p>The EPSG database often defines axis in an order that is inconvenient for display; we have a
method to quickly check what is going on.:</p>
<div class="highlight-python"><div class="highlight"><pre>if( CRS.getAxisOrder( coordianteReferenceSystem ) == CRS.AxisOrder.LAT_LON){
   // lat lon
}
</pre></div>
</div>
<p>Not all CoordinateReferenceSystems match a well defined axis order:</p>
<div class="highlight-python"><div class="highlight"><pre>CoordinateReferenceSystem crs = CRS.getHorizontalCRS(DefaultEngineeringCRS.GENERIC_2D));
if( CRS.getAxisOrder(crs) == AxisOrder.INAPPLICABLE){
 // someone just made this up
}
</pre></div>
</div>
</div>
<div class="section" id="coordinatereferencesystem">
<h2>CoordinateReferenceSystem<a class="headerlink" href="#coordinatereferencesystem" title="Permalink to this headline">¶</a></h2>
<p>The central user facing class for gt-referencing is <strong>CoordianteReferenceSystem</strong>.</p>
<div class="section" id="constants">
<h3>Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h3>
<p>Some CoordinateReferenceSystem instances are used so often it is worth making static final constants
for them. GeoTools has done so in order to cover the most common cases encountered when programming.</p>
<p>Static final constant CoordinateReferenceSystem in GeoTools:</p>
<p>A coordinate reference system using the WGS84 datum as an approximation of the shape of the earth:</p>
<ul class="simple">
<li>DefaultGeographicCRS.WGS84 - this is the most commonly used default</li>
<li>DefaultGeographicCRS.WGS84_3D</li>
</ul>
<p>A 3D coordinate reference system with the origin at the approximate centre of mass of the earth:</p>
<ul class="simple">
<li>DefaultGeocentricCRS.CARTESIAN</li>
<li>DefaultGeocentricCRS.SPHERICAL</li>
</ul>
<p>A contextually local coordinate reference system (for construction projects or moving objects):</p>
<ul class="simple">
<li>DefaultEngineeringCRS.CARTESIAN_2D (see the next section for a discussion of this value)</li>
<li>DefaultEngineeringCRS.CARTESIAN_3D</li>
<li>DefaultEngineeringCRS.GENERIC_2D</li>
<li>DefaultEngineeringCRS.GENERIC_3D</li>
</ul>
<p>A 1D coordinate reference system used for recording heights or depth relative to the ellipsoidal datum:</p>
<ul class="simple">
<li>DefaultVirticalCRS.ELLIPSOIDAL_HEIGHT</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For those into the details; these static final constant CoordinateReferenceSystem cite &#8220;GeoTools&#8221;
as the authority responsible for the definition. This is in marked contrast with the
<strong>CoordinateReferenceSystem</strong> instances produced by an AuthorityFactory (those instances will
credit a specific organisation like &#8220;EPSG&#8221;).</p>
</div>
<p>Examples:</p>
<ul>
<li><p class="first">Here is an example of accessing several of the predefined constants:</p>
<div class="highlight-java"><div class="highlight"><pre>    <span class="n">GeographicCRS</span> <span class="n">geoCRS</span> <span class="o">=</span> <span class="n">org</span><span class="o">.</span><span class="na">geotools</span><span class="o">.</span><span class="na">referencing</span><span class="o">.</span><span class="na">crs</span><span class="o">.</span><span class="na">DefaultGeographicCRS</span><span class="o">.</span><span class="na">WGS84</span><span class="o">;</span>
    <span class="n">GeodeticDatum</span> <span class="n">wgs84Datum</span> <span class="o">=</span> <span class="n">org</span><span class="o">.</span><span class="na">geotools</span><span class="o">.</span><span class="na">referencing</span><span class="o">.</span><span class="na">datum</span><span class="o">.</span><span class="na">DefaultGeodeticDatum</span><span class="o">.</span><span class="na">WGS84</span><span class="o">;</span>
    <span class="n">PrimeMeridian</span> <span class="n">greenwichMeridian</span> <span class="o">=</span> <span class="n">org</span><span class="o">.</span><span class="na">geotools</span><span class="o">.</span><span class="na">referencing</span><span class="o">.</span><span class="na">datum</span><span class="o">.</span><span class="na">DefaultPrimeMeridian</span><span class="o">.</span><span class="na">GREENWICH</span><span class="o">;</span>
    <span class="n">CartesianCS</span> <span class="n">cartCS</span> <span class="o">=</span> <span class="n">org</span><span class="o">.</span><span class="na">geotools</span><span class="o">.</span><span class="na">referencing</span><span class="o">.</span><span class="na">cs</span><span class="o">.</span><span class="na">DefaultCartesianCS</span><span class="o">.</span><span class="na">GENERIC_2D</span><span class="o">;</span>
    <span class="n">CoordinateSystemAxis</span> <span class="n">latAxis</span> <span class="o">=</span> <span class="n">org</span><span class="o">.</span><span class="na">geotools</span><span class="o">.</span><span class="na">referencing</span><span class="o">.</span><span class="na">cs</span><span class="o">.</span><span class="na">DefaultCoordinateSystemAxis</span><span class="o">.</span><span class="na">GEODETIC_LATITUDE</span><span class="o">;</span>
</pre></div>
</div>
</li>
<li><p class="first">You can use the following math transform to convert from the common &#8220;long/lat&#8221; representation
to three dimensions:</p>
<div class="highlight-python"><div class="highlight"><pre>MathTransform convert = CRS.findMathTransform( DefaultGeographicCRS.WGS84, DefaultGeocentricCRS.CARTESIAN);
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="generic-2d">
<h3>GENERIC_2D<a class="headerlink" href="#generic-2d" title="Permalink to this headline">¶</a></h3>
<p>One constant deserves special mention as it is used as a &#8220;wild card&#8221; placeholder for when you
are unsure of your data. The concept of a &#8220;Generic 2D&#8221; CoordianteReferenceSystem is formally
intended for working with things like CAD drawings where the results are measured in meters.</p>
<p>When considered in the context of GIS we treat it as a &#8220;wildcard&#8221; allowing you to get a visual
of some sort.</p>
<dl class="docutils">
<dt>Formally this is expressed by the <a class="reference external" href="http://docs.geotools.org/latest/javadocs/org/geotools/referencing/crs/DefaultEngineeringCRS.html#GENERIC_2D">DefaultEngineeringCRS.GENERIC_2D javadocs</a> as:</dt>
<dd>A two-dimensional wildcard coordinate system with x, y axis in metres. At the difference of
CARTESIAN_2D, this coordinate system is treated specially by the default coordinate operation
factory with loose transformation rules: if no transformation path were found (for example
through a derived CRS), then the transformation from this CRS to any CRS with a compatible
number of dimensions is assumed to be the identity transform. This CRS is usefull as a
kind of wildcard when no CRS were explicitly specified.</dd>
</dl>
<p>The concept is available two ways:</p>
<ul>
<li><p class="first">DefaultEngineeringCRS.GENERIC_2D</p>
<p>This option lacks an EPSG identifier hindering interoperability with external systems.</p>
</li>
<li><p class="first">Using the code &#8220;EPSG:404000&#8221; (a custom code defined by GeoTools):</p>
<div class="highlight-python"><div class="highlight"><pre>CoordinateReferenceSystem generic = CRS.decode(&quot;EPSG:404000&quot;);
</pre></div>
</div>
<p>This value the same as DefaultEngineeringCRS.GENERIC_2D (with a epsg identifier and description).
Since only this descriptive information is different <em>equals ignores metadata</em> will return true.</p>
<p>The same value is also provided as a static constant:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CartesianAuthoryFactory</span><span class="o">.</span><span class="n">GENERIC_2D</span>
</pre></div>
</div>
<p>This is the preferred way to represent an unknown CoordianteReferenceSystem in GeoTools.</p>
</li>
</ul>
</div>
<div class="section" id="google-maps">
<h3>Google Maps<a class="headerlink" href="#google-maps" title="Permalink to this headline">¶</a></h3>
<p>Google maps uses a bit of a shortcut, they make the assumption of a perfect sphere in order to be
just that much faster (after all they want a pretty picture nothing more).</p>
<p>GeoTools contains an implementation of Google Mercator (it was originally done as an experiment
in GeoServer).</p>
<p>Since this code has been donated you integrate your information with projection.</p>
<p>References:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.iter.dk/post/2008/05/SphericalWeb-Mercator-EPSG-code-3785.aspx">http://www.iter.dk/post/2008/05/SphericalWeb-Mercator-EPSG-code-3785.aspx</a></li>
<li><a class="reference external" href="http://johndeck.blogspot.com/2005/09/overlaying-mercator-projected-wms.html">http://johndeck.blogspot.com/2005/09/overlaying-mercator-projected-wms.html</a></li>
<li><a class="reference external" href="http://trac.openlayers.org/wiki/SphericalMercator">http://trac.openlayers.org/wiki/SphericalMercator</a></li>
</ul>
<p>Using an EPSG code to look up the CoordinateReferenceSystem:</p>
<div class="highlight-python"><div class="highlight"><pre>CoordinateReferenceSystem sphericalMercator = CRS.decode(&quot;EPSG:3857&quot;);
</pre></div>
</div>
<p>If you are using an older copy of the EPSG database, the above code may not be supported yet.</p>
<p>Before this code was official there were a couple earlier attempts:</p>
<div class="highlight-python"><div class="highlight"><pre>// Google == 9009l3 in leet! (as defined by GeoServer)
CoordinateReferenceSystem sphericalMercator = CRS.decode(&quot;EPSG:900913&quot;);
// Deprecated EPSG code (they messed up something and issued EPSG:3857 as a replacement)
CoordinateReferenceSystem sphericalMercator = CRS.decode(&quot;EPSG:3785&quot;);
</pre></div>
</div>
<p>Other than that you will need to define the projection yourself using WKT; or add it
into your EPSG database.:</p>
<div class="highlight-python"><div class="highlight"><pre>PROJCS[&quot;Google Mercator&quot;,
  GEOGCS[&quot;WGS 84&quot;,
    DATUM[&quot;World Geodetic System 1984&quot;,
      SPHEROID[&quot;WGS 84&quot;, 6378137.0, 298.257223563, AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],
      AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],
    PRIMEM[&quot;Greenwich&quot;, 0.0, AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],
    UNIT[&quot;degree&quot;, 0.017453292519943295],
    AXIS[&quot;Geodetic latitude&quot;, NORTH],
    AXIS[&quot;Geodetic longitude&quot;, EAST],
    AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],
  PROJECTION[&quot;Mercator_1SP&quot;],
  PARAMETER[&quot;semi_minor&quot;, 6378137.0],
  PARAMETER[&quot;latitude_of_origin&quot;, 0.0],
  PARAMETER[&quot;central_meridian&quot;, 0.0],
  PARAMETER[&quot;scale_factor&quot;, 1.0],
  PARAMETER[&quot;false_easting&quot;, 0.0],
  PARAMETER[&quot;false_northing&quot;, 0.0],
  UNIT[&quot;m&quot;, 1.0],
  AXIS[&quot;Easting&quot;, EAST],
  AXIS[&quot;Northing&quot;, NORTH],
  AUTHORITY[&quot;EPSG&quot;,&quot;900913&quot;]]
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <ul id="breadcrumbs">
            <li class="right" style="margin-right: 10px">
              <a href="axis.html" title="Axis"
                 accesskey="N">next</a></li>
            <li class="right" >
              <a href="internal.html" title="Internal"
                 accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">GeoTools 13-SNAPSHOT User Guide</a> &raquo;</li>
          <li><a href="../index.html" >Library</a> &raquo;</li>
          <li><a href="index.html" >Referencing</a> &raquo;</li>
        <li><a href="#">CRS</a></li>
      </ul>
    </div> 

    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, GeoTools.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3b1.
    </div>
  </body>
</html>